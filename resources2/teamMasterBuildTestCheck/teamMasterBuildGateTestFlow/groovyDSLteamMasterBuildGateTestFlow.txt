out.println 'Attempting Deployment to FT ENV' + params["ENVIRONMENT"] + ' - ' + params["NEXUS_ID"]+ '.' + params["SNAPSHOT_NUMBER"] + '-SNAPSHOT'
out.println 'Git Branch: ' + params["GIT_BRANCH_NAME"]


build ("ELIS2-Team-FT-Wake-Up-N-Sleep", BRANCH: params["GIT_BRANCH_NAME"], STATE: "ENABLE" )

retry ( 2 )
{
    build ("ELIS2-Team-MasterBuildCheck-FT-DeployByVersion", BRANCH: params["GIT_BRANCH_NAME"], ARTIFACT_VERSION: params["NEXUS_ID"] + "." + params["SNAPSHOT_NUMBER"] + "-SNAPSHOT", ENVIRONMENT:  params["ENVIRONMENT"], TOGGLE: "ALL_ON")
}

out.println 'Starting Test Run'

ignore(FAILURE) {
      build ("ELIS2-Performance-Testing", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
 }

parallel(
   {
    build ("ELIS2-Team-TestSuite-DACA", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-DigitalEvidence", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-I131", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-I90", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-IV", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-Lockbox", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-N400", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-N565", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-N336", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-TPS", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   },
   {
    build ("ELIS2-Team-TestSuite-N600", TEAM: params["TEAM"], GIT_BRANCH_NAME: params["GIT_BRANCH_NAME"], NEXUS_ID: params["NEXUS_ID"], BUILD_VERSION: params["SNAPSHOT_NUMBER"], ENVIRONMENT: params["ENVIRONMENT"], IS_SNAPSHOT: true)
   }
)
